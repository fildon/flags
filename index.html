<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Flags</title>
    <style>
      * {
        box-sizing: border-box;
      }

      body,
      h1,
      p {
        margin-block-end: 0;
      }

      body {
        min-height: 100vh;
        line-height: 1.5;
      }

      h1 {
        text-wrap: balance;
      }

      body {
        display: flex;
        flex-direction: column;
        align-items: center;
        > * {
          max-width: 60ch;
        }
      }

      svg {
        border: 1px solid black;
        min-width: min(90vw, 60ch);
      }
    </style>
    <script>
      window.onload = () => {
        const leftArm = document.getElementById("left-arm");
        const rightArm = document.getElementById("right-arm");

        let leftArmAngle = 0;
        let rightArmAngle = 0;
        setInterval(() => {
          const leftFrom = leftArmAngle;
          let leftTo = Math.random() * 360;

          // These checks ensure that we take the shortest path around the circle
          if (leftTo - leftFrom > 180) leftTo -= 360;
          if (leftFrom - leftTo > 180) leftTo += 360;

          // Normalize the stored angle to 0-360 range before storing
          leftArmAngle = (leftTo + 360) % 360;
          leftArm.setAttribute("from", `${leftFrom} 350 250`);
          leftArm.setAttribute("to", `${leftTo} 350 250`);
          leftArm.beginElement();

          const rightFrom = rightArmAngle;
          let rightTo = Math.random() * 360;

          // These checks ensure that we take the shortest path around the circle
          if (rightTo - rightFrom > 180) rightTo -= 360;
          if (rightFrom - rightTo > 180) rightTo += 360;

          // Normalize the stored angle to 0-360 range before storing
          rightArmAngle = (rightTo + 360) % 360;
          rightArm.setAttribute("from", `${rightFrom} 250 250`);
          rightArm.setAttribute("to", `${rightTo} 250 250`);
          rightArm.beginElement();
        }, 1000);
      };
    </script>
  </head>
  <body>
    <h1>Flags</h1>
    <main>
      <svg viewBox="0 0 600 500">
        <!-- Head -->
        <circle cx="300" cy="210" r="25" />
        <!-- Torso -->
        <rect x="265" y="240" width="70" height="160" rx="20" ry="21.333334" />
        <g>
          <!-- Shoulder -->
          <rect width="20" height="70" x="340" y="240" rx="10" />
          <!-- Arm+Pole -->
          <rect width="10" height="215" x="345" y="280" />
          <!-- Black square back ground, to give a border effect -->
          <polygon points="345,410 345,495 260,495 260,410" />
          <!-- Yellow triangle -->
          <polygon points="344,411 261,494 261,411" fill="#ffff00" />
          <!-- Red triangle -->
          <polygon points="344,411 261,494 344,494" fill="#ff0000" />
          <animateTransform
            id="left-arm"
            attributeName="transform"
            attributeType="XML"
            type="rotate"
            from="0 350 250"
            to="0 350 250"
            dur="0.5s"
            fill="freeze"
          />
        </g>
        <g>
          <!-- Shoulder -->
          <rect width="20" height="70" x="240" y="240" rx="10" />
          <!-- Arm+Pole -->
          <rect width="10" height="215" x="245" y="280" />
          <!-- Black square back ground, to give a border effect -->
          <polygon points="255,410 255,495 340,495 340,410" />
          <!-- Yellow triangle -->
          <polygon points="256,411 339,494 339,411" fill="#ffff00" />
          <!-- Red triangle -->
          <polygon points="256,411 339,494 256,494" fill="#ff0000" />
          <animateTransform
            id="right-arm"
            attributeName="transform"
            attributeType="XML"
            type="rotate"
            from="0 250 250"
            to="0 250 250"
            dur="0.5s"
            fill="freeze"
          />
        </g>
      </svg>
    </main>
  </body>
</html>
